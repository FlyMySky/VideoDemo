<?xml version="1.0"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       applicationComplete="initApp(event)"
                       showStatusBar="false"
                       close="onClosed(event)"
>
    <fx:Script><![CDATA[
        import mx.events.FlexEvent;
        import service.WsSocketService;

        internal var wsSocketService:WsSocketService;

        private function initApp(event:FlexEvent):void {
            stage.displayState = StageDisplayState.FULL_SCREEN;
            borderContainer.width = stage.width;
            borderContainer.height = stage.height;
//            videoPlayer.setLayoutBoundsSize(stage.fullScreenWidth, stage.fullScreenHeight);
            wsSocketService = new WsSocketService();
            wsSocketService.startService(videoPlayer);
        }

        private function onClosed(event:Event):void {
            wsSocketService.close()
        }
        ]]></fx:Script>
    <s:BorderContainer id="borderContainer" width="100%" height="100%" backgroundImage="@Embed('assets/float-show.jpg')"
                       backgroundImageFillMode="scale">
        <s:VideoPlayer
                id="videoPlayer"
                autoPlay="false"
                muted="false"
                autoRewind="true"
                source="assets/video.flv"
                skinClass="skins.MyPlayerSkin"
                visible="false"
                width="100%"
                height="100%"
        />
    </s:BorderContainer>

</s:WindowedApplication>
